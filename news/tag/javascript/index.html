<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/stylesheets/styles.css"><script src="/javascripts/vendor/custom.modernizr.js"></script><title>Asciidoctor | An open source implementation of AsciiDoc in Ruby</title><link rel="author" href="/humans.txt"></head><body class="antialiased"><nav class="top-bar"><ul class="title-area"><li class="name"><h1><a href="/">Asciidoctor</a></h1></li><li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li></ul><section class="top-bar-section"><ul class="right"><li class="g-plusone-slot"><div class="g-plusone" data-annotation="none"></div></li><li class="divider"></li><li><a href="/">About</a></li><li class="divider"></li><li><a href="/news/">News</a></li><li class="divider"></li><li><a href="https://github.com/asciidoctor">Code</a></li><li class="divider"></li><li><a href="http://discuss.asciidoctor.org">Discuss</a></li><li class="divider"></li><li><a href="/docs/">Docs</a></li><li class="divider"></li><li class="has-form"><a class="button" href="/docs/asciidoc-writers-guide/">Get Writing!</a></li></ul></section></nav><div class="container"><div class="row"><div class="large-12 columns"><div class="row"><div class="large-12 columns primary"><div id="content"><article class="post"><header class="entry-header"><h1 class="title"><a href="/news/2013/09/18/introducing-asciidoctor-js-live-preview/">Introducing Asciidoctor.js live preview in your browser</a></h1><h4><em>by</em> <span class="author">Guillaume Grossetie</span> - <time class="pubdate" datetime="2013-09-18T02:19:35-06:00">Wednesday, September 18, 2013</time></h4></header><div class="entry-content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;d like to introduce you to the easiest way to render any AsciiDoc file, local or remote, as HTML directly in your browser!</p>
</div>
<div class="paragraph">
<p>All you need to do is install the <a href="https://chrome.google.com/webstore/detail/asciidoctorjs-live-previe/iaalpfgpbocpdfblpnhhgllgbdbchmia">Chrome extension</a> or the <a href="https://addons.mozilla.org/fr/firefox/addon/asciidoctorjs-live-preview/">Firefox add-on</a>.
Then you can preview any AsciiDoc file as HTML just by visiting it!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-it-works"><a class="anchor" href="#how-it-works"></a>How it works</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Chrome extension and the Firefox add-on use <a href="https://github.com/asciidoctor/asciidoctor.js">Asciidoctor.js</a> to render AsciiDoc as HTML inside your browser.
Both provide a toggle button to switch between HTML output and AsciiDoc source.</p>
</div>
<div class="paragraph">
<p>Here you can see a local AsciiDoc file rendered inside of Chrome.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/chrome-extension-enabled.png" alt="chrome extension enabled">
</div>
<div class="title">Chrome extension in action</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can view any AsciiDoc file on GitHub through the lens of Asciidoctor.js with this extension!
Simply navigate to the file in the GitHub web interface (try <a href="https://github.com/asciidoctor/asciidoctor.org/blob/master/news/introducing-asciidoctor-js-live-preview.adoc">this blog post</a>) and click the <b class="button">Raw</b> button that appears above the file preview.
Looks much better, doesn&#8217;t it?
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="future"><a class="anchor" href="#future"></a>Future</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently, we are using <a href="https://github.com/asciidoctor/asciidoctor.js">Asciidoctor.js</a> based on <a href="https://github.com/asciidoctor/asciidoctor">Asciidoctor</a> 0.1.2.
We planned to cross-compile the newly-released <a href="https://github.com/asciidoctor/asciidoctor">Asciidoctor</a> 0.1.4 to Javascript, to support the latest and greatest features!</p>
</div>
<div class="paragraph">
<p>We are also working on adding some cool new features :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>browser-based editor using <a href="http://markitup.jaysalvat.com/">MarkItUp!</a></p>
</li>
<li>
<p>live reload to automatically refresh on local file changes</p>
</li>
<li>
<p>and many more&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing"><a class="anchor" href="#contributing"></a>Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;re always open for patches, better documentation, feature requests, evangelizing or any help you&#8217;re able to provide.</p>
</div>
</div>
</div></div><footer class="entry-footer"><div class="tags"><i class="label icon-tags"></i><a href="/news/tag/announcement/">announcement</a>, <a href="/news/tag/javascript/">javascript</a>, <a href="/news/tag/extension/">extension</a></div></footer><hr></article><article class="post"><header class="entry-header"><h1 class="title"><a href="/news/2013/05/21/asciidoctor-js-render-asciidoc-in-the-browser/">asciidoctor.js - Render AsciiDoc in your browser!</a></h1><h4><em>by</em> <span class="author">Dan Allen</span> - <time class="pubdate" datetime="2013-05-21T01:29:55-06:00">Tuesday, May 21, 2013</time></h4></header><div class="entry-content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;ve combined <a href="http://asciidoctor.org">Asciidoctor</a> and <a href="http://opalrb.org">Opal</a> to bring AsciiDoc rendering to the browser!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="imageblock feature right">
<div class="content">
<img src="/images/opal-logo.png" alt="Opal" width="200" height="200">
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/asciidoctor/asciidoctor.js">asciidoctor.js</a> uses the <a href="http://opalrb.org">Opal</a> Ruby-to-JavaScript cross compiler to generate a direct JavaScript port of <a href="http://asciidoctor.org">Asciidoctor</a>, an implementation of AsciiDoc. The result is AsciiDoc rendering in the browser!</p>
</div>
<div class="paragraph">
<p>The project consists primarily of a Rake build script that executes the Opal compiler on the Asciidoctor source code to produce the asciidoctor.js script.</p>
</div>
<div class="paragraph">
<p>Opal parses the Ruby code and any required libraries, then rewrites the code into JavaScript under the Opal namespace.
The resulting JavaScript can be executed in any JavaScript runtime environment, such as a browser or node.js application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proving-the-concept"><a class="anchor" href="#proving-the-concept"></a>Proving the concept</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When I first discovered Opal, I thought to myself, "yeah, this could work."
Little did I know that achieving this proof of concept was more than a small task.</p>
</div>
<div class="paragraph">
<p>The effort involved filling gaps in Opal to support all the features of the Ruby standard library that Asciidoctor uses, as well as changes in Asciidoctor to make it compatible with constraints imposed by JavaScript (such as immutable strings).</p>
</div>
<div class="paragraph">
<p>While there are still some shortcomings, I&#8217;m proud to say that asciidoctor.js can successfully render the complete AsciiDoc User Guide (a document that has served as a compliance benchmark throughout the development of Asciidoctor).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-scripts"><a class="anchor" href="#the-scripts"></a>The scripts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two scripts generated by the Rake build that are needed to run Asciidoctor in the browser:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">opal.js</dt>
<dd>
<p>The Ruby runtime in JavaScript</p>
</dd>
<dt class="hdlist1">asciidoctor.js</dt>
<dd>
<p>The JavaScript port of Asciidoctor</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Don&#8217;t fret over the large size of these files.
We haven&#8217;t even started to optimize, having only just achieved the proof of concept.</p>
</div>
<div class="paragraph">
<p>With that said, both files gzip rather nicely, bringing asciidoctor.js down from over 500K to around 90K.
There are options in Opal to generate more efficient code, but they are causing problems at the moment.
Once we sort out those issues, the size of the generated files should become quite acceptable.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need to load both files into your JavaScript environment to use Asciidoctor.
For instance, in an HTML page, add these two <code>&lt;script&gt;</code> tags (ideally at the bottom of the page):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="html language-html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">opal.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">asciidoctor.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see these scripts in action by running the examples, described in the <a href="https://github.com/asciidoctor/asciidoctor.js#readme">README</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage"><a class="anchor" href="#usage"></a>Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To interact with the generated code, you either:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Write code in Ruby that hooks into the native JavaScript environment, which Opal compiles into JavaScript</p>
</li>
<li>
<p>Invoke the JavaScript APIs that Opal generates directly from JavaScript</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here&#8217;s an example that shows how Ruby can interact with the native JavaScript environment to render a string of AsciiDoc in the browser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="ruby language-ruby">data = <span class="string"><span class="delimiter">%(</span><span class="content">= asciidoctor.js - Render AsciiDoc in your browser!
Dan Allen
2013-05-21

We've combined http://asciidoctor.org[Asciidoctor] and
http://opalrb.org[Opal] to bring AsciiDoc rendering to the browser!</span><span class="delimiter">)</span></span>

<span class="global-variable">$window</span>.addEventListener <span class="string"><span class="delimiter">'</span><span class="content">DOMContentLoaded</span><span class="delimiter">'</span></span>, proc {
  html_doc = <span class="constant">Asciidoctor</span>.render(data, <span class="symbol">:safe</span> =&gt; <span class="symbol">:safe</span>,
    <span class="symbol">:attributes</span> =&gt; <span class="string"><span class="delimiter">%w(</span><span class="content">notitle! anchors imagesdir=./images</span><span class="delimiter">)</span></span>)
  <span class="global-variable">$document</span>.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>).innerHTML = html_doc
}, <span class="predefined-constant">false</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changes-to-asciidoctor"><a class="anchor" href="#changes-to-asciidoctor"></a>Changes to Asciidoctor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At the moment, some changes are necessary in Asciidoctor to get it to compile with Opal.
These changes are maintained in the asciidoctor.js branch of the Asciidoctor git repository, from which asciidoctor.js is compiled.
The goal is to eventually eliminate all of these differences so that Asciidoctor can be compiled to JavaScript as is.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="go-play"><a class="anchor" href="#go-play"></a>Go play!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it&#8217;s time to go play with asciidoctor.js.
Explore what you can do with it and how it can be improved.
Then, get involved in either Asciidoctor or Opal to help make AsciiDoc in the browser the best it can be!</p>
</div>
</div>
</div></div><footer class="entry-footer"><div class="tags"><i class="label icon-tags"></i><a href="/news/tag/announcement/">announcement</a>, <a href="/news/tag/javascript/">javascript</a>, <a href="/news/tag/port/">port</a></div></footer><hr></article><div class="pagination-centered"><ul class="pagination"><li class="arrow unavailable"><a href="#"><i class="icon-fast-backward"></i></a></li><li class="arrow unavailable"><a href="#"><i class="icon-step-backward"></i></a></li><li>1 of 1</li><li class="arrow unavailable"><a href="#"><i class="icon-step-forward"></i></a></li><li class="arrow unavailable"><a href="#"><i class="icon-fast-forward"></i></a></li></ul></div></div></div></div></div></div></div><footer><div class="row full-width"><div class="large-6 columns"><p>&copy; Asciidoctor Project 2014.<br><span>Composed in AsciiDoc. Styled by Foundation. Baked with Awestruct.</span><br>Content licensed under the CC BY 3.0 License.</p></div><div class="large-6 columns"></div></div></footer><script>document.write('<script src=' + ('__proto__' in {} ? '/javascripts/vendor/zepto' : '/javascripts/vendor/jquery') + '.js><\/script>')</script><script src="/javascripts/foundation/foundation.js"></script><script src="/javascripts/foundation/foundation.topbar.js"></script><script>$(document).foundation();</script><script>(function() { var p1 = document.createElement('script'); p1.async = true; p1.src = 'https://apis.google.com/js/plusone.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(p1, s);})();</script><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount','UA-38215684-1']);
_gaq.push(['_trackPageview']);
(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body></html>