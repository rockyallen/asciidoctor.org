<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Asciidoctor::Document - API Documentation for Asciidoctor 0.1.4.rc.1</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/asciidoctor/document.rb
    <li>lib/asciidoctor/lexer.rb
    <li>lib/asciidoctor/substituters.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    <nav id="sections-section" class="section">
  <h3 class="section-header">Sections</h3>
  <ul class="link-list">
    
      <li><a href="#5Buntitled-5D"></a></li>
    
      <li><a href="#Public">Public</a></li>
    
      <li><a href="#Internal">Internal</a></li>
    
  </ul>
</nav>

    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="AbstractBlock.html">Asciidoctor::AbstractBlock</a>
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li class="calls-super" ><a href="#method-i-3C-3C">#&lt;&lt;</a>
    
    <li ><a href="#method-i-apply_attribute_value_subs">#apply_attribute_value_subs</a>
    
    <li ><a href="#method-i-attribute_locked-3F">#attribute_locked?</a>
    
    <li ><a href="#method-i-author">#author</a>
    
    <li ><a href="#method-i-backend">#backend</a>
    
    <li ><a href="#method-i-clear_playback_attributes">#clear_playback_attributes</a>
    
    <li class="calls-super" ><a href="#method-i-content">#content</a>
    
    <li ><a href="#method-i-counter">#counter</a>
    
    <li ><a href="#method-i-counter_increment">#counter_increment</a>
    
    <li ><a href="#method-i-delete_attribute">#delete_attribute</a>
    
    <li ><a href="#method-i-docinfo">#docinfo</a>
    
    <li ><a href="#method-i-doctitle">#doctitle</a>
    
    <li ><a href="#method-i-doctype">#doctype</a>
    
    <li ><a href="#method-i-embedded-3F">#embedded?</a>
    
    <li ><a href="#method-i-extensions-3F">#extensions?</a>
    
    <li ><a href="#method-i-finalize_header">#finalize_header</a>
    
    <li ><a href="#method-i-first_section">#first_section</a>
    
    <li ><a href="#method-i-footnotes">#footnotes</a>
    
    <li ><a href="#method-i-footnotes-3F">#footnotes?</a>
    
    <li ><a href="#method-i-has_header-3F">#has_header?</a>
    
    <li ><a href="#method-i-name">#name</a>
    
    <li ><a href="#method-i-nested-3F">#nested?</a>
    
    <li ><a href="#method-i-nextval">#nextval</a>
    
    <li ><a href="#method-i-noheader">#noheader</a>
    
    <li ><a href="#method-i-notitle">#notitle</a>
    
    <li ><a href="#method-i-playback_attributes">#playback_attributes</a>
    
    <li ><a href="#method-i-register">#register</a>
    
    <li ><a href="#method-i-render">#render</a>
    
    <li ><a href="#method-i-renderer">#renderer</a>
    
    <li ><a href="#method-i-restore_attributes">#restore_attributes</a>
    
    <li ><a href="#method-i-revdate">#revdate</a>
    
    <li ><a href="#method-i-save_attributes">#save_attributes</a>
    
    <li ><a href="#method-i-set_attribute">#set_attribute</a>
    
    <li ><a href="#method-i-source">#source</a>
    
    <li ><a href="#method-i-source_lines">#source_lines</a>
    
    <li ><a href="#method-i-title">#title</a>
    
    <li ><a href="#method-i-title-3D">#title=</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-update_backend_attributes">#update_backend_attributes</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_adoc.html">README.adoc</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Asciidoctor.html">Asciidoctor</a>
  
    <li><a href="../Asciidoctor/AbstractBlock.html">Asciidoctor::AbstractBlock</a>
  
    <li><a href="../Asciidoctor/AbstractNode.html">Asciidoctor::AbstractNode</a>
  
    <li><a href="../Asciidoctor/AttributeList.html">Asciidoctor::AttributeList</a>
  
    <li><a href="../Asciidoctor/BaseTemplate.html">Asciidoctor::BaseTemplate</a>
  
    <li><a href="../Asciidoctor/Block.html">Asciidoctor::Block</a>
  
    <li><a href="../Asciidoctor/Callouts.html">Asciidoctor::Callouts</a>
  
    <li><a href="../Asciidoctor/Cli.html">Asciidoctor::Cli</a>
  
    <li><a href="../Asciidoctor/Cli/Invoker.html">Asciidoctor::Cli::Invoker</a>
  
    <li><a href="../Asciidoctor/Cli/Options.html">Asciidoctor::Cli::Options</a>
  
    <li><a href="../Asciidoctor/Compliance.html">Asciidoctor::Compliance</a>
  
    <li><a href="../Asciidoctor/Debug.html">Asciidoctor::Debug</a>
  
    <li><a href="../Asciidoctor/DocBook45.html">Asciidoctor::DocBook45</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockAdmonitionTemplate.html">Asciidoctor::DocBook45::BlockAdmonitionTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockAudioTemplate.html">Asciidoctor::DocBook45::BlockAudioTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockColistTemplate.html">Asciidoctor::DocBook45::BlockColistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockDlistTemplate.html">Asciidoctor::DocBook45::BlockDlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockExampleTemplate.html">Asciidoctor::DocBook45::BlockExampleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockFloatingTitleTemplate.html">Asciidoctor::DocBook45::BlockFloatingTitleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockImageTemplate.html">Asciidoctor::DocBook45::BlockImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockListingTemplate.html">Asciidoctor::DocBook45::BlockListingTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockLiteralTemplate.html">Asciidoctor::DocBook45::BlockLiteralTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockOlistTemplate.html">Asciidoctor::DocBook45::BlockOlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockOpenTemplate.html">Asciidoctor::DocBook45::BlockOpenTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockPageBreakTemplate.html">Asciidoctor::DocBook45::BlockPageBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockParagraphTemplate.html">Asciidoctor::DocBook45::BlockParagraphTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockPassTemplate.html">Asciidoctor::DocBook45::BlockPassTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockPreambleTemplate.html">Asciidoctor::DocBook45::BlockPreambleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockQuoteTemplate.html">Asciidoctor::DocBook45::BlockQuoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockRulerTemplate.html">Asciidoctor::DocBook45::BlockRulerTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockSidebarTemplate.html">Asciidoctor::DocBook45::BlockSidebarTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockTableTemplate.html">Asciidoctor::DocBook45::BlockTableTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockTocTemplate.html">Asciidoctor::DocBook45::BlockTocTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockUlistTemplate.html">Asciidoctor::DocBook45::BlockUlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockVerseTemplate.html">Asciidoctor::DocBook45::BlockVerseTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockVideoTemplate.html">Asciidoctor::DocBook45::BlockVideoTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/DocumentTemplate.html">Asciidoctor::DocBook45::DocumentTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/EmbeddedTemplate.html">Asciidoctor::DocBook45::EmbeddedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineAnchorTemplate.html">Asciidoctor::DocBook45::InlineAnchorTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineBreakTemplate.html">Asciidoctor::DocBook45::InlineBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineButtonTemplate.html">Asciidoctor::DocBook45::InlineButtonTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineCalloutTemplate.html">Asciidoctor::DocBook45::InlineCalloutTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineFootnoteTemplate.html">Asciidoctor::DocBook45::InlineFootnoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineImageTemplate.html">Asciidoctor::DocBook45::InlineImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineIndextermTemplate.html">Asciidoctor::DocBook45::InlineIndextermTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineKbdTemplate.html">Asciidoctor::DocBook45::InlineKbdTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineMenuTemplate.html">Asciidoctor::DocBook45::InlineMenuTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineQuotedTemplate.html">Asciidoctor::DocBook45::InlineQuotedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/SectionTemplate.html">Asciidoctor::DocBook45::SectionTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5.html">Asciidoctor::DocBook5</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockAdmonitionTemplate.html">Asciidoctor::DocBook5::BlockAdmonitionTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockAudioTemplate.html">Asciidoctor::DocBook5::BlockAudioTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockColistTemplate.html">Asciidoctor::DocBook5::BlockColistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockDlistTemplate.html">Asciidoctor::DocBook5::BlockDlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockExampleTemplate.html">Asciidoctor::DocBook5::BlockExampleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockFloatingTitleTemplate.html">Asciidoctor::DocBook5::BlockFloatingTitleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockImageTemplate.html">Asciidoctor::DocBook5::BlockImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockListingTemplate.html">Asciidoctor::DocBook5::BlockListingTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockLiteralTemplate.html">Asciidoctor::DocBook5::BlockLiteralTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockOlistTemplate.html">Asciidoctor::DocBook5::BlockOlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockOpenTemplate.html">Asciidoctor::DocBook5::BlockOpenTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockPageBreakTemplate.html">Asciidoctor::DocBook5::BlockPageBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockParagraphTemplate.html">Asciidoctor::DocBook5::BlockParagraphTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockPassTemplate.html">Asciidoctor::DocBook5::BlockPassTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockPreambleTemplate.html">Asciidoctor::DocBook5::BlockPreambleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockQuoteTemplate.html">Asciidoctor::DocBook5::BlockQuoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockRulerTemplate.html">Asciidoctor::DocBook5::BlockRulerTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockSidebarTemplate.html">Asciidoctor::DocBook5::BlockSidebarTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockTableTemplate.html">Asciidoctor::DocBook5::BlockTableTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockTocTemplate.html">Asciidoctor::DocBook5::BlockTocTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockUlistTemplate.html">Asciidoctor::DocBook5::BlockUlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockVerseTemplate.html">Asciidoctor::DocBook5::BlockVerseTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockVideoTemplate.html">Asciidoctor::DocBook5::BlockVideoTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/DocumentTemplate.html">Asciidoctor::DocBook5::DocumentTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/EmbeddedTemplate.html">Asciidoctor::DocBook5::EmbeddedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineAnchorTemplate.html">Asciidoctor::DocBook5::InlineAnchorTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineBreakTemplate.html">Asciidoctor::DocBook5::InlineBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineButtonTemplate.html">Asciidoctor::DocBook5::InlineButtonTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineCalloutTemplate.html">Asciidoctor::DocBook5::InlineCalloutTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineFootnoteTemplate.html">Asciidoctor::DocBook5::InlineFootnoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineImageTemplate.html">Asciidoctor::DocBook5::InlineImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineIndextermTemplate.html">Asciidoctor::DocBook5::InlineIndextermTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineKbdTemplate.html">Asciidoctor::DocBook5::InlineKbdTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineMenuTemplate.html">Asciidoctor::DocBook5::InlineMenuTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineQuotedTemplate.html">Asciidoctor::DocBook5::InlineQuotedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/SectionTemplate.html">Asciidoctor::DocBook5::SectionTemplate</a>
  
    <li><a href="../Asciidoctor/Document.html">Asciidoctor::Document</a>
  
    <li><a href="../Asciidoctor/EmptyTemplate.html">Asciidoctor::EmptyTemplate</a>
  
    <li><a href="../Asciidoctor/Extensions.html">Asciidoctor::Extensions</a>
  
    <li><a href="../Asciidoctor/Extensions/BlockMacroProcessor.html">Asciidoctor::Extensions::BlockMacroProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/BlockProcessor.html">Asciidoctor::Extensions::BlockProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Extension.html">Asciidoctor::Extensions::Extension</a>
  
    <li><a href="../Asciidoctor/Extensions/IncludeProcessor.html">Asciidoctor::Extensions::IncludeProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/InlineMacroProcessor.html">Asciidoctor::Extensions::InlineMacroProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/MacroProcessor.html">Asciidoctor::Extensions::MacroProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Postprocessor.html">Asciidoctor::Extensions::Postprocessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Preprocessor.html">Asciidoctor::Extensions::Preprocessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Processor.html">Asciidoctor::Extensions::Processor</a>
  
    <li><a href="../Asciidoctor/Extensions/Registry.html">Asciidoctor::Extensions::Registry</a>
  
    <li><a href="../Asciidoctor/Extensions/Treeprocessor.html">Asciidoctor::Extensions::Treeprocessor</a>
  
    <li><a href="../Asciidoctor/HTML5.html">Asciidoctor::HTML5</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockAdmonitionTemplate.html">Asciidoctor::HTML5::BlockAdmonitionTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockAudioTemplate.html">Asciidoctor::HTML5::BlockAudioTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockColistTemplate.html">Asciidoctor::HTML5::BlockColistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockDlistTemplate.html">Asciidoctor::HTML5::BlockDlistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockExampleTemplate.html">Asciidoctor::HTML5::BlockExampleTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockFloatingTitleTemplate.html">Asciidoctor::HTML5::BlockFloatingTitleTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockImageTemplate.html">Asciidoctor::HTML5::BlockImageTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockListingTemplate.html">Asciidoctor::HTML5::BlockListingTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockLiteralTemplate.html">Asciidoctor::HTML5::BlockLiteralTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockOlistTemplate.html">Asciidoctor::HTML5::BlockOlistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockOpenTemplate.html">Asciidoctor::HTML5::BlockOpenTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockPageBreakTemplate.html">Asciidoctor::HTML5::BlockPageBreakTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockParagraphTemplate.html">Asciidoctor::HTML5::BlockParagraphTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockPassTemplate.html">Asciidoctor::HTML5::BlockPassTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockPreambleTemplate.html">Asciidoctor::HTML5::BlockPreambleTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockQuoteTemplate.html">Asciidoctor::HTML5::BlockQuoteTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockRulerTemplate.html">Asciidoctor::HTML5::BlockRulerTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockSidebarTemplate.html">Asciidoctor::HTML5::BlockSidebarTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockTableTemplate.html">Asciidoctor::HTML5::BlockTableTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockTocTemplate.html">Asciidoctor::HTML5::BlockTocTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockUlistTemplate.html">Asciidoctor::HTML5::BlockUlistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockVerseTemplate.html">Asciidoctor::HTML5::BlockVerseTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockVideoTemplate.html">Asciidoctor::HTML5::BlockVideoTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/DocumentTemplate.html">Asciidoctor::HTML5::DocumentTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/EmbeddedTemplate.html">Asciidoctor::HTML5::EmbeddedTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineAnchorTemplate.html">Asciidoctor::HTML5::InlineAnchorTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineBreakTemplate.html">Asciidoctor::HTML5::InlineBreakTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineButtonTemplate.html">Asciidoctor::HTML5::InlineButtonTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineCalloutTemplate.html">Asciidoctor::HTML5::InlineCalloutTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineFootnoteTemplate.html">Asciidoctor::HTML5::InlineFootnoteTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineImageTemplate.html">Asciidoctor::HTML5::InlineImageTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineIndextermTemplate.html">Asciidoctor::HTML5::InlineIndextermTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineKbdTemplate.html">Asciidoctor::HTML5::InlineKbdTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineMenuTemplate.html">Asciidoctor::HTML5::InlineMenuTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineQuotedTemplate.html">Asciidoctor::HTML5::InlineQuotedTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/SectionTemplate.html">Asciidoctor::HTML5::SectionTemplate</a>
  
    <li><a href="../Asciidoctor/Helpers.html">Asciidoctor::Helpers</a>
  
    <li><a href="../Asciidoctor/Inline.html">Asciidoctor::Inline</a>
  
    <li><a href="../Asciidoctor/Lexer.html">Asciidoctor::Lexer</a>
  
    <li><a href="../Asciidoctor/List.html">Asciidoctor::List</a>
  
    <li><a href="../Asciidoctor/ListItem.html">Asciidoctor::ListItem</a>
  
    <li><a href="../Asciidoctor/PathResolver.html">Asciidoctor::PathResolver</a>
  
    <li><a href="../Asciidoctor/PreprocessorReader.html">Asciidoctor::PreprocessorReader</a>
  
    <li><a href="../Asciidoctor/Reader.html">Asciidoctor::Reader</a>
  
    <li><a href="../Asciidoctor/Reader/Cursor.html">Asciidoctor::Reader::Cursor</a>
  
    <li><a href="../Asciidoctor/Renderer.html">Asciidoctor::Renderer</a>
  
    <li><a href="../Asciidoctor/SafeMode.html">Asciidoctor::SafeMode</a>
  
    <li><a href="../Asciidoctor/Section.html">Asciidoctor::Section</a>
  
    <li><a href="../Asciidoctor/Substituters.html">Asciidoctor::Substituters</a>
  
    <li><a href="../Asciidoctor/Table.html">Asciidoctor::Table</a>
  
    <li><a href="../Asciidoctor/Table/Cell.html">Asciidoctor::Table::Cell</a>
  
    <li><a href="../Asciidoctor/Table/Column.html">Asciidoctor::Table::Column</a>
  
    <li><a href="../Asciidoctor/Table/ParserContext.html">Asciidoctor::Table::ParserContext</a>
  
    <li><a href="../Asciidoctor/TemplateCache.html">Asciidoctor::TemplateCache</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Asciidoctor::Document</h1>

  <div id="description" class="description">
    
<p>Methods for parsing Asciidoc documents and rendering themusing erb
templates.</p>

<p>There are several strategies for getting the title of the document:</p>
<dl class="rdoc-list note-list"><dt>doctitle
<dd>
<p>value of title attribute, if assigned and non-empty,otherwise title of
first section in document, if presentotherwise nil</p>
</dd><dt>name
<dd>
<p>an alias of doctitle</p>
</dd><dt>title
<dd>
<p>value of the title attribute, or nil if not presentfirst_section.title -
title of first section in document, if presentheader.title - title of
section level 0</p>
</dd></dl>

<p>Keep in mind that youâ€™ll want to honor these document settings:</p>
<dl class="rdoc-list note-list"><dt>notitle
<dd>
<p>The h1 heading should not be shown</p>
</dd><dt>noheader
<dd>
<p>The header block (h1 heading, author, revision info) should not be shown</p>
</dd></dl>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="AttributeEntry">AttributeEntry
        
        <dd class="description">
        
      
        <dt id="Footnote">Footnote
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-safe" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">safe</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Public A read-only integer value indicating the level of security
thatshould be enforced while processing this document. The value must beset
in the <a href="Document.html">Document</a> constructor using the :safe
option.</p>

<p>A value of 0 (UNSAFE) disables any of the security features enforcedby <a
href="../Asciidoctor.html">Asciidoctor</a> (Ruby is still subject to its
own restrictions).</p>

<p>A value of 1 (SAFE) closely parallels safe mode in AsciiDoc. In
particular,it prevents access to files which reside outside of the parent
directoryof the source file and disables any macro other than the include
macro.</p>

<p>A value of 10 (SERVER) disallows the document from setting attributes
thatwould affect the rendering of the document, in addition to all the
securityfeatures of SafeMode::SAFE. For instance, this value disallows
changing thebackend or the source-highlighter using an attribute defined in
the sourcedocument. This is the most fundamental level of security for
server-sidedeployments (hence the name).</p>

<p>A value of 20 (SECURE) disallows the document from attempting to read
filesfrom the file system and including the contents of them into the
document,in addition to all the security features of SafeMode::SECURE.
Inparticular, it disallows use of the include::[] macro and the embedding
ofbinary content (data uri), stylesheets and JavaScripts referenced by
thedocument. (Asciidoctor and trusted extensions may still be allowed to
embedtrusted content into the document).</p>

<p>Since <a href="../Asciidoctor.html">Asciidoctor</a> is aiming for wide
adoption, 20 (SECURE) is the defaultvalue and is recommended for
server-side deployments.</p>

<p>A value of 100 (PARANOID) is planned to disallow the use of
passthroughmacros and prevents the document from setting any known
attributes inaddition to all the security features of SafeMode::SECURE.
Please note thatthis level is not currently implemented (and therefore not
enforced)!</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-backend" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">backend</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="backend-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 443</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">backend</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'backend'</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- backend-source -->
          
        </div>

        

        
      </div><!-- backend-method -->

    
      <div id="method-i-content" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="AbstractBlock.html#method-i-content">Asciidoctor::AbstractBlock#content</a>
            </div>
          

          
          <div class="method-source-code" id="content-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 769</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content</span>
  <span class="ruby-comment"># per AsciiDoc-spec, remove the title before rendering the body,</span>
  <span class="ruby-comment"># regardless of whether the header is rendered)</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">'title'</span>)
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- content-source -->
          
        </div>

        

        
      </div><!-- content-method -->

    
      <div id="method-i-doctitle" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">doctitle</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>We need to be able to return some semblance of a title</p>
          
          

          
          <div class="method-source-code" id="doctitle-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 458</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">doctitle</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">val</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">'title'</span>, <span class="ruby-string">''</span>)).<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">val</span> = <span class="ruby-identifier">title</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">sect</span> = <span class="ruby-identifier">first_section</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sect</span>.<span class="ruby-identifier">title?</span>
    <span class="ruby-identifier">val</span> = <span class="ruby-identifier">sect</span>.<span class="ruby-identifier">title</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sanitize</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'&lt;'</span>)
    <span class="ruby-identifier">val</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/&lt;[^&gt;]+&gt;/</span>, <span class="ruby-string">''</span>).<span class="ruby-identifier">tr_s</span>(<span class="ruby-string">' '</span>, <span class="ruby-string">' '</span>).<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- doctitle-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Document.html#method-i-name">name</a>
        </div>
        

        
      </div><!-- doctitle-method -->

    
      <div id="method-i-doctype" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">doctype</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="doctype-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 439</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">doctype</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'doctype'</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- doctype-source -->
          
        </div>

        

        
      </div><!-- doctype-method -->

    
      <div id="method-i-embedded-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">embedded?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="embedded-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 420</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">embedded?</span>
  <span class="ruby-comment"># QUESTION should this be !@options[:header_footer] ?</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-string">'embedded'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- embedded-3F-source -->
          
        </div>

        

        
      </div><!-- embedded-3F-method -->

    
      <div id="method-i-extensions-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extensions?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="extensions-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 425</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extensions?</span>
  <span class="ruby-ivar">@extensions</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- extensions-3F-source -->
          
        </div>

        

        
      </div><!-- extensions-3F-method -->

    
      <div id="method-i-first_section" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">first_section</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>QUESTION move to <a href="AbstractBlock.html">AbstractBlock</a>?</p>
          
          

          
          <div class="method-source-code" id="first_section-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 498</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_section</span>
  <span class="ruby-identifier">has_header?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@header</span> <span class="ruby-operator">:</span> (<span class="ruby-ivar">@blocks</span> <span class="ruby-operator">||</span> []).<span class="ruby-identifier">detect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Section</span>}
<span class="ruby-keyword">end</span></pre>
          </div><!-- first_section-source -->
          
        </div>

        

        
      </div><!-- first_section-method -->

    
      <div id="method-i-footnotes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">footnotes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="footnotes-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 412</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">footnotes</span>
  <span class="ruby-ivar">@references</span>[<span class="ruby-value">:footnotes</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- footnotes-source -->
          
        </div>

        

        
      </div><!-- footnotes-method -->

    
      <div id="method-i-footnotes-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">footnotes?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="footnotes-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">footnotes?</span>
  <span class="ruby-keyword">not</span> <span class="ruby-ivar">@references</span>[<span class="ruby-value">:footnotes</span>].<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- footnotes-3F-source -->
          
        </div>

        

        
      </div><!-- footnotes-3F-method -->

    
      <div id="method-i-has_header-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_header?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="has_header-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 502</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_header?</span>
  <span class="ruby-ivar">@header</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- has_header-3F-source -->
          
        </div>

        

        
      </div><!-- has_header-3F-method -->

    
      <div id="method-i-name" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">name</span><span
            class="method-args">(opts = {})</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Document.html#method-i-doctitle">doctitle</a>
        </div>
        
      </div><!-- name-method -->

    
      <div id="method-i-nested-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">nested?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="nested-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 416</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nested?</span>
  <span class="ruby-ivar">@parent_document</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- nested-3F-source -->
          
        </div>

        

        
      </div><!-- nested-3F-method -->

    
      <div id="method-i-noheader" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">noheader</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="noheader-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 493</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">noheader</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-string">'noheader'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- noheader-source -->
          
        </div>

        

        
      </div><!-- noheader-method -->

    
      <div id="method-i-notitle" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">notitle</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="notitle-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">notitle</span>
  <span class="ruby-operator">!</span><span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'showtitle'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'notitle'</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- notitle-source -->
          
        </div>

        

        
      </div><!-- notitle-method -->

    
      <div id="method-i-register" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">register</span><span
            class="method-args">(type, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="register-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 391</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">register</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:ids</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-ivar">@references</span>[<span class="ruby-value">:ids</span>][<span class="ruby-identifier">value</span>[<span class="ruby-value">0</span>]] = (<span class="ruby-identifier">value</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">||</span> <span class="ruby-string">'['</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">']'</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@references</span>[<span class="ruby-value">:ids</span>][<span class="ruby-identifier">value</span>] = <span class="ruby-string">'['</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">+</span> <span class="ruby-string">']'</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:footnotes</span>, <span class="ruby-value">:indexterms</span>
    <span class="ruby-ivar">@references</span>[<span class="ruby-identifier">type</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:catalog_assets</span>]
      <span class="ruby-ivar">@references</span>[<span class="ruby-identifier">type</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- register-source -->
          
        </div>

        

        
      </div><!-- register-method -->

    
      <div id="method-i-renderer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">renderer</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="renderer-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 707</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">renderer</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@renderer</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@renderer</span>
  
  <span class="ruby-identifier">render_options</span> = {}

  <span class="ruby-comment"># Load up relevant Document @options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-value">:template_dir</span>
    <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:template_dirs</span>] = [<span class="ruby-ivar">@options</span>[<span class="ruby-value">:template_dir</span>]]
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-value">:template_dirs</span>
    <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:template_dirs</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:template_dirs</span>]
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:template_cache</span>] = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:template_cache</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:backend</span>] = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">'backend'</span>, <span class="ruby-string">'html5'</span>)
  <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:template_engine</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:template_engine</span>]
  <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:eruby</span>] = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:eruby</span>, <span class="ruby-string">'erb'</span>)
  <span class="ruby-identifier">render_options</span>[<span class="ruby-value">:compact</span>] = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:compact</span>, <span class="ruby-keyword">false</span>)
  
  <span class="ruby-comment"># Override Document @option settings with options passed in</span>
  <span class="ruby-identifier">render_options</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-identifier">opts</span>

  <span class="ruby-ivar">@renderer</span> = <span class="ruby-constant">Renderer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">render_options</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- renderer-source -->
          
        </div>

        

        
      </div><!-- renderer-method -->

    
      <div id="method-i-source" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">source</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Make the raw source for the <a href="Document.html">Document</a> available.</p>
          
          

          
          <div class="method-source-code" id="source-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">source</span>
  <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">source</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@reader</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- source-source -->
          
        </div>

        

        
      </div><!-- source-method -->

    
      <div id="method-i-source_lines" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">source_lines</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Make the raw source lines for the <a href="Document.html">Document</a>
available.</p>
          
          

          
          <div class="method-source-code" id="source_lines-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 435</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">source_lines</span>
  <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">source_lines</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@reader</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- source_lines-source -->
          
        </div>

        

        
      </div><!-- source_lines-method -->

    
      <div id="method-i-title" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">title</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The title explicitly defined in the document attributes</p>
          
          

          
          <div class="method-source-code" id="title-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">title</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'title'</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- title-source -->
          
        </div>

        

        
      </div><!-- title-method -->

    
      <div id="method-i-title-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">title=</span><span
            class="method-args">(title)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="title-3D-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">title=</span>(<span class="ruby-identifier">title</span>)
  <span class="ruby-ivar">@header</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Section</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-value">0</span>)
  <span class="ruby-ivar">@header</span>.<span class="ruby-identifier">title</span> = <span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- title-3D-source -->
          
        </div>

        

        
      </div><!-- title-3D-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 826</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-node">%Q[#{super.to_s} - #{doctitle}]</span>  
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

  
  
  <section id="Public" class="documentation-section">
    
    <div class="documentation-section-title">
      <h2 class="section-header">
        Public
      </h2>
      <span class="section-click-top">
        <a href="#top">&uarr; top</a>
      </span>
    </div>
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-base_dir" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">base_dir</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Base directory for rendering this document. Defaults to directory of the
source file.If the source is a string, defaults to the current directory.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-callouts" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">callouts</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Get the Hash of callouts</p>
        
        </div>
      </div>
      
      <div id="attribute-i-counters" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">counters</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Get the Hash of document counters</p>
        
        </div>
      </div>
      
      <div id="attribute-i-extensions" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">extensions</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The extensions registry</p>
        
        </div>
      </div>
      
      <div id="attribute-i-header" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">header</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The section level 0 block</p>
        
        </div>
      </div>
      
      <div id="attribute-i-parent_document" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">parent_document</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>A reference to the parent document of this nested document.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-references" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">references</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Get the Hash of document references</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-Public-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(data = [], options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initialize an Asciidoc object.</p>
<dl class="rdoc-list note-list"><dt>data
<dd>
<p>The Array of Strings holding the Asciidoc source document. (default: [])</p>
</dd><dt>options
<dd>
<p>A Hash of options to control processing, such as setting the safe mode
(:safe),suppressing the header/footer (:header_footer) and attribute
overrides (:attributes)(default: {})</p>
</dd></dl>

<h3 id="method-c-new-label-Examples">Examples<span><a href="#method-c-new-label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">data</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-identifier">doc</span>  = <span class="ruby-constant">Asciidoctor</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">data</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">render</span>
</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="AbstractBlock.html#method-c-new">Asciidoctor::AbstractBlock.new</a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">data</span> = [], <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">super</span>(<span class="ruby-keyword">self</span>, <span class="ruby-value">:document</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:parent</span>]
    <span class="ruby-ivar">@parent_document</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:parent</span>)
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_dir</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@parent_document</span>.<span class="ruby-identifier">base_dir</span>
    <span class="ruby-comment"># QUESTION should we support setting attribute in parent document from nested document?</span>
    <span class="ruby-ivar">@attribute_overrides</span> = <span class="ruby-ivar">@parent_document</span>.<span class="ruby-identifier">attributes</span>
    <span class="ruby-ivar">@safe</span> = <span class="ruby-ivar">@parent_document</span>.<span class="ruby-identifier">safe</span>
    <span class="ruby-ivar">@renderer</span> = <span class="ruby-ivar">@parent_document</span>.<span class="ruby-identifier">renderer</span>
    <span class="ruby-identifier">initialize_extensions</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@extensions</span> = <span class="ruby-ivar">@parent_document</span>.<span class="ruby-identifier">extensions</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@parent_document</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-comment"># copy attributes map and normalize keys</span>
    <span class="ruby-comment"># attribute overrides are attributes that can only be set from the commandline</span>
    <span class="ruby-comment"># a direct assignment effectively makes the attribute a constant</span>
    <span class="ruby-comment"># a nil value or name with leading or trailing ! will result in the attribute being unassigned</span>
    <span class="ruby-ivar">@attribute_overrides</span> = (<span class="ruby-identifier">options</span>[<span class="ruby-value">:attributes</span>] <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">collector</span>,(<span class="ruby-identifier">key</span>,<span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">'!'</span>)
        <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
        <span class="ruby-identifier">value</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">'!'</span>)
        <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
        <span class="ruby-identifier">value</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">collector</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-identifier">collector</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@safe</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@renderer</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">initialize_extensions</span> = <span class="ruby-constant">Asciidoctor</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-string">'Extensions'</span>)
    <span class="ruby-ivar">@extensions</span> = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># initialize furthur down</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@header</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@references</span> = {
    <span class="ruby-value">:ids</span> =<span class="ruby-operator">&gt;</span> {},
    <span class="ruby-value">:footnotes</span> =<span class="ruby-operator">&gt;</span> [],
    <span class="ruby-value">:links</span> =<span class="ruby-operator">&gt;</span> [],
    <span class="ruby-value">:images</span> =<span class="ruby-operator">&gt;</span> [],
    <span class="ruby-value">:indexterms</span> =<span class="ruby-operator">&gt;</span> [],
    <span class="ruby-value">:includes</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>,
  }
  <span class="ruby-ivar">@counters</span> = {}
  <span class="ruby-ivar">@callouts</span> = <span class="ruby-constant">Callouts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@attributes_modified</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@parent_document</span>
    <span class="ruby-comment"># safely resolve the safe mode from const, int or string</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@safe</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">safe_mode</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:safe</span>])
      <span class="ruby-ivar">@safe</span> = <span class="ruby-constant">SafeMode</span><span class="ruby-operator">::</span><span class="ruby-constant">SECURE</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">safe_mode</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fixnum</span>)
      <span class="ruby-comment"># be permissive in case API user wants to define new levels</span>
      <span class="ruby-ivar">@safe</span> = <span class="ruby-identifier">safe_mode</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-ivar">@safe</span> = <span class="ruby-constant">SafeMode</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">safe_mode</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>).<span class="ruby-identifier">to_i</span>
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-ivar">@safe</span> = <span class="ruby-constant">SafeMode</span><span class="ruby-operator">::</span><span class="ruby-constant">SECURE</span>.<span class="ruby-identifier">to_i</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:header_footer</span>] = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:header_footer</span>, <span class="ruby-keyword">false</span>)

  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'encoding'</span>] = <span class="ruby-string">'UTF-8'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'sectids'</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'notitle'</span>] = <span class="ruby-string">''</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:header_footer</span>]
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-placement'</span>] = <span class="ruby-string">'auto'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'stylesheet'</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'prewrap'</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'attribute-undefined'</span>] = <span class="ruby-constant">COMPLIANCE</span>[<span class="ruby-value">:attribute_undefined</span>]
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'attribute-missing'</span>] = <span class="ruby-constant">COMPLIANCE</span>[<span class="ruby-value">:attribute_missing</span>]

  <span class="ruby-comment"># language strings</span>
  <span class="ruby-comment"># TODO load these based on language settings</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'caution-caption'</span>] = <span class="ruby-string">'Caution'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'important-caption'</span>] = <span class="ruby-string">'Important'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'note-caption'</span>] = <span class="ruby-string">'Note'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'tip-caption'</span>] = <span class="ruby-string">'Tip'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'warning-caption'</span>] = <span class="ruby-string">'Warning'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'appendix-caption'</span>] = <span class="ruby-string">'Appendix'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'example-caption'</span>] = <span class="ruby-string">'Example'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'figure-caption'</span>] = <span class="ruby-string">'Figure'</span>
  <span class="ruby-comment">#@attributes['listing-caption'] = 'Listing'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'table-caption'</span>] = <span class="ruby-string">'Table'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-title'</span>] = <span class="ruby-string">'Table of Contents'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'manname-title'</span>] = <span class="ruby-string">'NAME'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'untitled-label'</span>] = <span class="ruby-string">'Untitled'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'version-label'</span>] = <span class="ruby-string">'Version'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'last-update-label'</span>] = <span class="ruby-string">'Last updated'</span>

  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'asciidoctor'</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'asciidoctor-version'</span>] = <span class="ruby-constant">VERSION</span>

  <span class="ruby-identifier">safe_mode_name</span> = <span class="ruby-constant">SafeMode</span>.<span class="ruby-identifier">constants</span>.<span class="ruby-identifier">detect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-constant">SafeMode</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">l</span>) <span class="ruby-operator">==</span> <span class="ruby-ivar">@safe</span>}.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>
  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'safe-mode-name'</span>] = <span class="ruby-identifier">safe_mode_name</span>
  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-node">&quot;safe-mode-#{safe_mode_name}&quot;</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'safe-mode-level'</span>] = <span class="ruby-ivar">@safe</span>

  <span class="ruby-comment"># sync the embedded attribute w/ the value of options...do not allow override</span>
  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'embedded'</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:header_footer</span>] <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-string">''</span>

  <span class="ruby-comment"># the only way to set the include-depth attribute is via the document options</span>
  <span class="ruby-comment"># 10 is the AsciiDoc default</span>
  <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'include-depth'</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">10</span>

  <span class="ruby-comment"># the only way to enable uri reads is via the document options, disabled by default</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'allow-uri-read'</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'allow-uri-read'</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># if the base_dir option is specified, it overrides docdir as the root for relative paths</span>
  <span class="ruby-comment"># otherwise, the base_dir is the directory of the source file (docdir) or the current</span>
  <span class="ruby-comment"># directory of the input is a string</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:base_dir</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>]
      <span class="ruby-ivar">@base_dir</span> = <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment">#warn 'asciidoctor: WARNING: setting base_dir is recommended when working with string documents' unless nested?</span>
      <span class="ruby-ivar">@base_dir</span> = <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@base_dir</span> = <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:base_dir</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># allow common attributes backend and doctype to be set using options hash</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:backend</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'backend'</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:backend</span>].<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:doctype</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'doctype'</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:doctype</span>].<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@safe</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">SafeMode</span><span class="ruby-operator">::</span><span class="ruby-constant">SERVER</span>
    <span class="ruby-comment"># restrict document from setting copycss, source-highlighter and backend</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'copycss'</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'source-highlighter'</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'backend'</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">DEFAULT_BACKEND</span>
    <span class="ruby-comment"># restrict document from seeing the docdir and trim docfile to relative path</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@parent_document</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attribute_overrides</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'docfile'</span>)
      <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docfile'</span>] = <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docfile'</span>][(<span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'docdir'</span>] = <span class="ruby-string">''</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@safe</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">SafeMode</span><span class="ruby-operator">::</span><span class="ruby-constant">SECURE</span>
      <span class="ruby-comment"># assign linkcss (preventing css embedding) unless explicitly disabled from the commandline or API</span>
      <span class="ruby-comment"># effectively the same has &quot;has key 'linkcss' and value == nil&quot;</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@attribute_overrides</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">'linkcss'</span>, <span class="ruby-string">''</span>).<span class="ruby-identifier">nil?</span>
        <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'linkcss'</span>] = <span class="ruby-string">''</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-comment"># restrict document from enabling icons</span>
      <span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-string">'icons'</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-ivar">@attribute_overrides</span>.<span class="ruby-identifier">delete_if</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">verdict</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-comment"># a nil value undefines the attribute </span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-comment"># a negative key (trailing !) undefines the attribute</span>
    <span class="ruby-comment"># NOTE already normalize above as key with nil value</span>
    <span class="ruby-comment">#elsif key.end_with? '!'</span>
    <span class="ruby-comment">#  @attributes.delete(key[0..-2])</span>
    <span class="ruby-comment"># a negative key (leading !) undefines the attribute</span>
    <span class="ruby-comment"># NOTE already normalize above as key with nil value</span>
    <span class="ruby-comment">#elsif key.start_with? '!'</span>
    <span class="ruby-comment">#  @attributes.delete(key[1..-1])</span>
    <span class="ruby-comment"># otherwise it's an attribute assignment</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># a value ending in @ indicates this attribute does not override</span>
      <span class="ruby-comment"># an attribute with the same key in the document souce</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">'@'</span>)
        <span class="ruby-identifier">val</span> = <span class="ruby-identifier">val</span>.<span class="ruby-identifier">chop</span>
        <span class="ruby-identifier">verdict</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">val</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">verdict</span>
  }

  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@parent_document</span>
    <span class="ruby-comment"># setup default backend and doctype</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'backend'</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">DEFAULT_BACKEND</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'doctype'</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">DEFAULT_DOCTYPE</span>
    <span class="ruby-identifier">update_backend_attributes</span>

    <span class="ruby-comment">#@attributes['indir'] = @attributes['docdir']</span>
    <span class="ruby-comment">#@attributes['infile'] = @attributes['docfile']</span>

    <span class="ruby-comment"># dynamic intrinstic attribute values</span>
    <span class="ruby-identifier">now</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localdate'</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%d'</span>)
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localtime'</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%H:%M:%S %Z'</span>)
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localdatetime'</span>] <span class="ruby-operator">||=</span> [<span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localdate'</span>], <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localtime'</span>]] <span class="ruby-operator">*</span> <span class="ruby-string">' '</span>
    
    <span class="ruby-comment"># docdate, doctime and docdatetime should default to</span>
    <span class="ruby-comment"># localdate, localtime and localdatetime if not otherwise set</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'docdate'</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localdate'</span>]
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'doctime'</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localtime'</span>]
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'docdatetime'</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'localdatetime'</span>]

    <span class="ruby-comment"># fallback directories</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'stylesdir'</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">'.'</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'iconsdir'</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">'imagesdir'</span>, <span class="ruby-string">'./images'</span>), <span class="ruby-string">'icons'</span>)

    <span class="ruby-ivar">@extensions</span> = <span class="ruby-identifier">initialize_extensions</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Extensions</span><span class="ruby-operator">::</span><span class="ruby-constant">Registry</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@reader</span> = <span class="ruby-constant">PreprocessorReader</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">self</span>, <span class="ruby-identifier">data</span>, <span class="ruby-constant">Asciidoctor</span><span class="ruby-operator">::</span><span class="ruby-constant">Reader</span><span class="ruby-operator">::</span><span class="ruby-constant">Cursor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'docfile'</span>], <span class="ruby-ivar">@base_dir</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@extensions</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">preprocessors?</span>
      <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">load_preprocessors</span>(<span class="ruby-keyword">self</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">processor</span><span class="ruby-operator">|</span>
        <span class="ruby-ivar">@reader</span> = <span class="ruby-identifier">processor</span>.<span class="ruby-identifier">process</span>(<span class="ruby-ivar">@reader</span>, <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">lines</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@reader</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># don't need to do the extra processing within our own document</span>
    <span class="ruby-comment"># FIXME line info isn't reported correctly within include files in nested document</span>
    <span class="ruby-ivar">@reader</span> = <span class="ruby-constant">Reader</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">data</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:cursor</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Now parse the lines in the reader into blocks</span>
  <span class="ruby-constant">Lexer</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-ivar">@reader</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">:header_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:parse_header_only</span>, <span class="ruby-keyword">false</span>)) 

  <span class="ruby-ivar">@callouts</span>.<span class="ruby-identifier">rewind</span>

  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@parent_document</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@extensions</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">treeprocessors?</span>
    <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">load_treeprocessors</span>(<span class="ruby-keyword">self</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">processor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">processor</span>.<span class="ruby-identifier">process</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-Public-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-3C-3C" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Append a content <a href="Block.html">Block</a> to this <a
href="Document.html">Document</a>.</p>

<p>If the child block is a <a href="Section.html">Section</a>, assign an index
to it.</p>
<dl class="rdoc-list note-list"><dt>block
<dd>
<p>The child <a href="Block.html">Block</a> to append to this parent <a
href="Block.html">Block</a></p>
</dd></dl>

<p>Returns nothing.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              Asciidoctor::AbstractBlock#<<
            </div>
          

          
          <div class="method-source-code" id="3C-3C-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 513</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">context</span> <span class="ruby-operator">==</span> <span class="ruby-value">:section</span>
    <span class="ruby-identifier">assign_index</span> <span class="ruby-identifier">block</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- 3C-3C-source -->
          
        </div>

        

        
      </div><!-- 3C-3C-method -->

    
      <div id="method-i-attribute_locked-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">attribute_locked?</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Determine if the attribute has been locked by being assigned in document
options</p>
<dl class="rdoc-list note-list"><dt>key
<dd>
<p>The attribute key to check</p>
</dd></dl>

<p>Returns true if the attribute is locked, false otherwise</p>
          
          

          
          <div class="method-source-code" id="attribute_locked-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 650</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">attribute_locked?</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@attribute_overrides</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- attribute_locked-3F-source -->
          
        </div>

        

        
      </div><!-- attribute_locked-3F-method -->

    
      <div id="method-i-author" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">author</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convenience method to retrieve the document attribute â€˜authorâ€™</p>

<p>returns the full name of the author as a String</p>
          
          

          
          <div class="method-source-code" id="author-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 478</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">author</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'author'</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- author-source -->
          
        </div>

        

        
      </div><!-- author-method -->

    
      <div id="method-i-counter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">counter</span><span
            class="method-args">(name, seed = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get the named counter and take the next number in the sequence.</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>the String name of the counter</p>
</dd><dt>seed
<dd>
<p>the initial value as a String or Integer</p>
</dd></dl>

<p>returns the next number in the sequence for the specified counter</p>
          
          

          
          <div class="method-source-code" id="counter-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">counter</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">seed</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@counters</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">name</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">seed</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">seed</span> = <span class="ruby-identifier">nextval</span>(<span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">seed</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">seed</span>
      <span class="ruby-identifier">seed</span> = <span class="ruby-identifier">seed</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@counters</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">seed</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@counters</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">nextval</span>(<span class="ruby-ivar">@counters</span>[<span class="ruby-identifier">name</span>])
  <span class="ruby-keyword">end</span>

  (<span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-ivar">@counters</span>[<span class="ruby-identifier">name</span>])
<span class="ruby-keyword">end</span></pre>
          </div><!-- counter-source -->
          
        </div>

        

        
      </div><!-- counter-method -->

    
      <div id="method-i-counter_increment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">counter_increment</span><span
            class="method-args">(counter_name, block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Increment the specified counter and store it in the blockâ€™s attributes</p>
<dl class="rdoc-list note-list"><dt>counter_name
<dd>
<p>the String name of the counter attribute</p>
</dd><dt>block
<dd>
<p>the <a href="Block.html">Block</a> on which to save the counter</p>
</dd></dl>

<p>returns the next number in the sequence for the specified counter</p>
          
          

          
          <div class="method-source-code" id="counter_increment-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 365</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">counter_increment</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">val</span> = <span class="ruby-identifier">counter</span>(<span class="ruby-identifier">counter_name</span>)
  <span class="ruby-constant">AttributeEntry</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">val</span>).<span class="ruby-identifier">save_to</span>(<span class="ruby-identifier">block</span>.<span class="ruby-identifier">attributes</span>)
  <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- counter_increment-source -->
          
        </div>

        

        
      </div><!-- counter_increment-method -->

    
      <div id="method-i-delete_attribute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_attribute</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Delete the specified attribute from the document if the name is not locked</p>

<p>If the attribute is locked, false is returned. Otherwise, the attribute is
deleted.</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>the String attribute name</p>
</dd></dl>

<p>returns true if the attribute was deleted, false if it was not because itâ€™s
locked</p>
          
          

          
          <div class="method-source-code" id="delete_attribute-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 635</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_attribute</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute_locked?</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-ivar">@attributes_modified</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- delete_attribute-source -->
          
        </div>

        

        
      </div><!-- delete_attribute-method -->

    
      <div id="method-i-docinfo" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">docinfo</span><span
            class="method-args">(pos = :header, ext = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Read the docinfo file(s) for inclusion in thedocument template</p>

<p>If the docinfo1 attribute is set, read the docinfo.ext file. If the
docinfoattribute is set, read the doc-name.docinfo.ext file. If the
docinfo2attribute is set, read both files in that order.</p>
<dl class="rdoc-list note-list"><dt>pos
<dd>
<p>The Symbol position of the docinfo, either :header or :footer. (default:
:header)</p>
</dd><dt>ext
<dd>
<p>The extension of the docinfo file(s). If not set, the extensionwill be
determined based on the basebackend. (default: nil)</p>
</dd></dl>

<p>returns The contents of the docinfo file(s)</p>
          
          

          
          <div class="method-source-code" id="docinfo-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 788</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">docinfo</span>(<span class="ruby-identifier">pos</span> = <span class="ruby-value">:header</span>, <span class="ruby-identifier">ext</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">safe</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">SafeMode</span><span class="ruby-operator">::</span><span class="ruby-constant">SECURE</span>
    <span class="ruby-string">''</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">pos</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:footer</span>
      <span class="ruby-identifier">qualifier</span> = <span class="ruby-string">'-footer'</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">qualifier</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">ext</span> = <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'outfilesuffix'</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">nil?</span>

    <span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>

    <span class="ruby-identifier">docinfo</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'docinfo'</span>)
    <span class="ruby-identifier">docinfo1</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'docinfo1'</span>)
    <span class="ruby-identifier">docinfo2</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'docinfo2'</span>)
    <span class="ruby-identifier">docinfo_filename</span> = <span class="ruby-node">&quot;docinfo#{qualifier}#{ext}&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">docinfo1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">docinfo2</span>
      <span class="ruby-identifier">docinfo_path</span> = <span class="ruby-identifier">normalize_system_path</span>(<span class="ruby-identifier">docinfo_filename</span>)
      <span class="ruby-identifier">content</span> = <span class="ruby-identifier">read_asset</span>(<span class="ruby-identifier">docinfo_path</span>)
      <span class="ruby-identifier">content</span> = <span class="ruby-identifier">sub_attributes</span>(<span class="ruby-identifier">content</span>.<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">entries</span>).<span class="ruby-identifier">join</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">docinfo</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">docinfo2</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'docname'</span>)
      <span class="ruby-identifier">docinfo_path</span> = <span class="ruby-identifier">normalize_system_path</span>(<span class="ruby-node">&quot;#{@attributes['docname']}-#{docinfo_filename}&quot;</span>)
      <span class="ruby-identifier">content2</span> = <span class="ruby-identifier">read_asset</span>(<span class="ruby-identifier">docinfo_path</span>)
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">content2</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">content2</span> = <span class="ruby-identifier">sub_attributes</span>(<span class="ruby-identifier">content2</span>.<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">entries</span>).<span class="ruby-identifier">join</span>
        <span class="ruby-identifier">content</span> = <span class="ruby-identifier">content</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">content2</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;#{content}\n#{content2}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># to_s forces nil to empty string</span>
    <span class="ruby-identifier">content</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- docinfo-source -->
          
        </div>

        

        
      </div><!-- docinfo-method -->

    
      <div id="method-i-render" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">render</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Render the Asciidoc document using the templatesloaded by <a
href="Renderer.html">Renderer</a>. If a :template_dir is not specified,or a
template is missing, the renderer will fall back tousing the appropriate
built-in template.</p>
          
          

          
          <div class="method-source-code" id="render-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 735</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">restore_attributes</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-identifier">renderer</span>(<span class="ruby-identifier">opts</span>)

  <span class="ruby-comment"># QUESTION should we add Preserializeprocessors? is it the right name?</span>
  <span class="ruby-comment">#if !@parent_document &amp;&amp; @extensions &amp;&amp; @extensions.preserializeprocessors?</span>
  <span class="ruby-comment">#  @extensions.load_preserializeprocessors(self).each do |processor|</span>
  <span class="ruby-comment">#    processor.process r</span>
  <span class="ruby-comment">#  end</span>
  <span class="ruby-comment">#end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">doctype</span> <span class="ruby-operator">==</span> <span class="ruby-string">'inline'</span>
    <span class="ruby-comment"># QUESTION should we warn if @blocks.size &gt; 0 and the first block is not a paragraph?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">block</span> = <span class="ruby-ivar">@blocks</span>.<span class="ruby-identifier">first</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">content_model</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:compound</span>
      <span class="ruby-identifier">output</span> = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">content</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">output</span> = <span class="ruby-string">''</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">output</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)[<span class="ruby-value">:header_footer</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">render</span>(<span class="ruby-string">'document'</span>, <span class="ruby-keyword">self</span>).<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">render</span>(<span class="ruby-string">'embedded'</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@parent_document</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@extensions</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">postprocessors?</span>
      <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">load_postprocessors</span>(<span class="ruby-keyword">self</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">processor</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">output</span> = <span class="ruby-identifier">processor</span>.<span class="ruby-identifier">process</span> <span class="ruby-identifier">output</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@extensions</span>.<span class="ruby-identifier">reset</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- render-source -->
          
        </div>

        

        
      </div><!-- render-method -->

    
      <div id="method-i-revdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">revdate</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convenience method to retrieve the document attribute â€˜revdateâ€™</p>

<p>returns the date of last revision for the document as a String</p>
          
          

          
          <div class="method-source-code" id="revdate-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 485</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">revdate</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'revdate'</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- revdate-source -->
          
        </div>

        

        
      </div><!-- revdate-method -->

    
      <div id="method-i-set_attribute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_attribute</span><span
            class="method-args">(name, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Set the specified attribute on the document if the name is not locked</p>

<p>If the attribute is locked, false is returned. Otherwise, the value
isassigned to the attribute name after first performing
attributesubstitutions on the value. If the attribute name is â€˜backendâ€™,
then thevalue of backend-related attributes are updated.</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>the String attribute name</p>
</dd><dt>value
<dd>
<p>the String attribute value</p>
</dd></dl>

<p>returns true if the attribute was set, false if it was not set because itâ€™s
locked</p>
          
          

          
          <div class="method-source-code" id="set_attribute-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 615</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute_locked?</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">apply_attribute_value_subs</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-ivar">@attributes_modified</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'backend'</span>
      <span class="ruby-identifier">update_backend_attributes</span>()
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_attribute-source -->
          
        </div>

        

        
      </div><!-- set_attribute-method -->

    
      <div id="method-i-update_backend_attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_backend_attributes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Update the backend attributes to reflect a change in the selected backend</p>
          
          

          
          <div class="method-source-code" id="update_backend_attributes-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 682</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_backend_attributes</span>()
  <span class="ruby-identifier">backend</span> = <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'backend'</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-constant">BACKEND_ALIASES</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">backend</span>
    <span class="ruby-identifier">backend</span> = <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'backend'</span>] = <span class="ruby-constant">BACKEND_ALIASES</span>[<span class="ruby-identifier">backend</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">basebackend</span> = <span class="ruby-identifier">backend</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-constant">REGEXP</span>[<span class="ruby-value">:trailing_digit</span>], <span class="ruby-string">''</span>)
  <span class="ruby-identifier">page_width</span> = <span class="ruby-constant">DEFAULT_PAGE_WIDTHS</span>[<span class="ruby-identifier">basebackend</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">page_width</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'pagewidth'</span>] = <span class="ruby-identifier">page_width</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">'pagewidth'</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-node">&quot;backend-#{backend}&quot;</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'basebackend'</span>] = <span class="ruby-identifier">basebackend</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-node">&quot;basebackend-#{basebackend}&quot;</span>] = <span class="ruby-string">''</span>
  <span class="ruby-comment"># REVIEW cases for the next two assignments</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-node">&quot;#{backend}-#{@attributes['doctype']}&quot;</span>] = <span class="ruby-string">''</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-node">&quot;#{basebackend}-#{@attributes['doctype']}&quot;</span>] = <span class="ruby-string">''</span>
  <span class="ruby-identifier">ext</span> = <span class="ruby-constant">DEFAULT_EXTENSIONS</span>[<span class="ruby-identifier">basebackend</span>] <span class="ruby-operator">||</span> <span class="ruby-string">'.html'</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'outfilesuffix'</span>] = <span class="ruby-identifier">ext</span>
  <span class="ruby-identifier">file_type</span> = <span class="ruby-identifier">ext</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'filetype'</span>] = <span class="ruby-identifier">file_type</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-node">&quot;filetype-#{file_type}&quot;</span>] = <span class="ruby-string">''</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- update_backend_attributes-source -->
          
        </div>

        

        
      </div><!-- update_backend_attributes-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- Public -->

  
  
  <section id="Internal" class="documentation-section">
    
    <div class="documentation-section-title">
      <h2 class="section-header">
        Internal
      </h2>
      <span class="section-click-top">
        <a href="#top">&uarr; top</a>
      </span>
    </div>
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-Internal-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-apply_attribute_value_subs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apply_attribute_value_subs</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Apply substitutions to the attribute value</p>

<p>If the value is an inline passthrough macro (e.g., <a
href="http://text">pass:</a>), thenapply the substitutions defined on the
macro to the text. Otherwise,apply the verbatim substitutions to the value.</p>
<dl class="rdoc-list note-list"><dt>value
<dd>
<p>The String attribute value on which to perform substitutions</p>
</dd></dl>

<p>Returns The String value with substitutions performed.</p>
          
          

          
          <div class="method-source-code" id="apply_attribute_value_subs-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 663</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">apply_attribute_value_subs</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">REGEXP</span>[<span class="ruby-value">:pass_macro_basic</span>])
    <span class="ruby-comment"># copy match for Ruby 1.8.7 compat</span>
    <span class="ruby-identifier">m</span> = <span class="ruby-identifier">$~</span>
    <span class="ruby-identifier">subs</span> = []
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">m</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">subs</span> = <span class="ruby-identifier">resolve_subs</span>(<span class="ruby-identifier">m</span>[<span class="ruby-value">1</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">subs</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">apply_subs</span>(<span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>], <span class="ruby-identifier">subs</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">apply_header_subs</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- apply_attribute_value_subs-source -->
          
        </div>

        

        
      </div><!-- apply_attribute_value_subs-method -->

    
      <div id="method-i-clear_playback_attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear_playback_attributes</span><span
            class="method-args">(attributes)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Delete any attributes stored for playback</p>
          
          

          
          <div class="method-source-code" id="clear_playback_attributes-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 587</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_playback_attributes</span>(<span class="ruby-identifier">attributes</span>)
  <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:attribute_entries</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- clear_playback_attributes-source -->
          
        </div>

        

        
      </div><!-- clear_playback_attributes-method -->

    
      <div id="method-i-finalize_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">finalize_header</span><span
            class="method-args">(unrooted_attributes, header_valid = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>called after the header has been parsed and before the contentwill be
parsed.</p>
          
          

          
          <div class="method-source-code" id="finalize_header-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 525</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">finalize_header</span> <span class="ruby-identifier">unrooted_attributes</span>, <span class="ruby-identifier">header_valid</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">clear_playback_attributes</span> <span class="ruby-identifier">unrooted_attributes</span>
  <span class="ruby-identifier">save_attributes</span>
  <span class="ruby-identifier">unrooted_attributes</span>[<span class="ruby-string">'invalid-header'</span>] = <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">header_valid</span>
  <span class="ruby-identifier">unrooted_attributes</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- finalize_header-source -->
          
        </div>

        

        
      </div><!-- finalize_header-method -->

    
      <div id="method-i-nextval" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">nextval</span><span
            class="method-args">(current)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get the next value in the sequence.</p>

<p>Handles both integer and character sequences.</p>
<dl class="rdoc-list note-list"><dt>current
<dd>
<p>the value to increment as a String or Integer</p>
</dd></dl>

<p>returns the next value in the sequence according to the current valueâ€™s
type</p>
          
          

          
          <div class="method-source-code" id="nextval-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 378</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nextval</span>(<span class="ruby-identifier">current</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)
    <span class="ruby-identifier">current</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">intval</span> = <span class="ruby-identifier">current</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">intval</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">current</span>.<span class="ruby-identifier">to_s</span>
      (<span class="ruby-identifier">current</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">intval</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> 
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- nextval-source -->
          
        </div>

        

        
      </div><!-- nextval-method -->

    
      <div id="method-i-playback_attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">playback_attributes</span><span
            class="method-args">(block_attributes)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Replay attribute assignments at the block level</p>
          
          

          
          <div class="method-source-code" id="playback_attributes-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 592</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">playback_attributes</span>(<span class="ruby-identifier">block_attributes</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_attributes</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-value">:attribute_entries</span>
    <span class="ruby-identifier">block_attributes</span>[<span class="ruby-value">:attribute_entries</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">negate</span>
        <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">entry</span>.<span class="ruby-identifier">name</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">entry</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- playback_attributes-source -->
          
        </div>

        

        
      </div><!-- playback_attributes-method -->

    
      <div id="method-i-restore_attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">restore_attributes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Restore the attributes to the previously saved state</p>
          
          

          
          <div class="method-source-code" id="restore_attributes-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 582</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restore_attributes</span>
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-ivar">@original_attributes</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- restore_attributes-source -->
          
        </div>

        

        
      </div><!-- restore_attributes-method -->

    
      <div id="method-i-save_attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">save_attributes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Branch the attributes so that the original state can be restoredat a future
time.</p>
          
          

          
          <div class="method-source-code" id="save_attributes-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/document.rb, line 534</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save_attributes</span>
  <span class="ruby-comment"># enable toc and numbered by default in DocBook backend</span>
  <span class="ruby-comment"># NOTE the attributes_modified should go away once we have a proper attribute storage &amp; tracking facility</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'basebackend'</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'docbook'</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc'</span>] = <span class="ruby-string">''</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">attribute_locked?</span>(<span class="ruby-string">'toc'</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@attributes_modified</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'toc'</span>)
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'numbered'</span>] = <span class="ruby-string">''</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">attribute_locked?</span>(<span class="ruby-string">'numbered'</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@attributes_modified</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'numbered'</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'doctitle'</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">val</span> = <span class="ruby-identifier">doctitle</span>).<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'doctitle'</span>] = <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># css-signature cannot be updated after header attributes are processed</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'css-signature'</span>)
    <span class="ruby-ivar">@id</span> = <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'css-signature'</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-string">'toc2'</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc'</span>] = <span class="ruby-string">''</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-class'</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">'toc2'</span>
    <span class="ruby-keyword">case</span> (<span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-position'</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc2'</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-string">'left'</span>, <span class="ruby-string">'&lt;'</span>, <span class="ruby-string">'&amp;lt;'</span>
      <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-position'</span>] = <span class="ruby-string">'left'</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">'right'</span>, <span class="ruby-string">'&gt;'</span>, <span class="ruby-string">'&amp;gt;'</span>
      <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-position'</span>] = <span class="ruby-string">'right'</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">'top'</span>, <span class="ruby-string">'^'</span>
      <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-position'</span>] = <span class="ruby-string">'top'</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">'bottom'</span>, <span class="ruby-string">'v'</span>
      <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-position'</span>] = <span class="ruby-string">'bottom'</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@attributes</span>[<span class="ruby-string">'toc-position'</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">'left'</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@original_attributes</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">dup</span>

  <span class="ruby-comment"># unfreeze &quot;flexible&quot; attributes</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">nested?</span>
    <span class="ruby-constant">FLEXIBLE_ATTRIBUTES</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
      <span class="ruby-comment"># turning a flexible attribute off should be permanent</span>
      <span class="ruby-comment"># (we may need more config if that's not always the case)</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@attribute_overrides</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@attribute_overrides</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">nil?</span>
        <span class="ruby-ivar">@attribute_overrides</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- save_attributes-source -->
          
        </div>

        

        
      </div><!-- save_attributes-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- Internal -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.1.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

